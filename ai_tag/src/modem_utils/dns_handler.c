/// NOT FINISHED

/**
 * @brief
 *
 * @file
 *
 */

/***********************************************************************************************************************
 * Header Includes
 **********************************************************************************************************************/
#include <nrf_socket.h>
#include "dns_handler.h"
#include <zephyr/logging/log.h>
/***********************************************************************************************************************
 * Macro Definitions
 **********************************************************************************************************************/
#define MODULE dns_handler
LOG_MODULE_REGISTER(MODULE);
/***********************************************************************************************************************
 * Typedef Definitions
 **********************************************************************************************************************/
static struct dns_server_lookup 
{
    uint32_t addr;
    uint8_t addr_u8[4];
};
/***********************************************************************************************************************
 * Private Global Variables
 **********************************************************************************************************************/

static struct dns_server_lookup dns_servers[] =
    {
        // Google DNS primary
        {
            .addr = 134744072,
            .addr_u8 = {8, 8, 8, 8}},
        // Google DNS secondary
        {
            .addr = 134743044,
            .addr_u8 = {8, 8, 4, 4}},
        // OpenDNS primary
        {
            .addr = 3494108894,
            .addr_u8 = {208, 67, 222, 222}},
        // OpenDNS secondary
        {
            .addr = 3494108894,
            .addr_u8 = {208, 67, 222, 222}},
        {.addr = 0,
         .addr_u8 = {
             0,
             0,
             0,
         }}};
/***********************************************************************************************************************
 * Private Function Definitions
 **********************************************************************************************************************/

/***********************************************************************************************************************
 * Public Function Definitions
 **********************************************************************************************************************/
// @todo Add dns parameter to function.
int set_dns_server()
{
    struct nrf_in_addr dns;
    dns.s_addr = dns_servers[0].addr;
    int dns_err = nrf_setdnsaddr(NRF_AF_INET, &dns, sizeof(dns));
    LOG_DBG("DNS is set to %d - result %d", dns.s_addr, dns_err);
    return dns_err;
}